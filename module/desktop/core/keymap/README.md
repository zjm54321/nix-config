# Kanata 键盘布局说明

> 创建日期：2025年6月18日  
> 作者：zjm54321

## 概述

本配置使用 Kanata 键盘重映射工具，实现了多层键盘布局和智能按键功能。主要特性包括：

- **多层布局**：支持普通模式、Vim 控制模式、Vim 输入模式和导航模式
- **智能按键**：tap-hold 机制实现轻按/长按不同功能
- **自动大写**：所有字母和符号键支持自动大写功能

## 按键映射详解

### 1. 特殊功能键

#### Caps Lock 键 (@caps)
- **轻按一下**：ESC
- **轻按两下**：临时大写锁定 (2秒)
- **轻按长按**：智能大写锁定
- **长按**：Ctrl

#### Left Shift 键 (@lang)
- **轻按**：语言切换 (Ctrl+Space)
- **长按**：Left Shift

#### Menu 键 (@menu)
- **轻按**：Menu 键
- **长按**：进入导航模式

### 2. 自动大写功能

所有字母键 (a-z)、数字键 (0-9) 和符号键都支持自动大写：

| 按键 | 轻按 | 长按 |
| ---- | ---- | ---- |
| a    | a    | A    |
| b    | b    | B    |
| ...  | ...  | ...  |
| z    | z    | Z    |
| 1    | 1    | !    |
| 2    | 2    | @    |
| ...  | ...  | ...  |
| ;    | ;    | :    |
| '    | '    | "    |
| ,    | ,    | <    |
| .    | .    | >    |
| /    | /    | ?    |

### 3. 多层布局

#### Base 层 (默认层)
- 基础字母数字输入
- 所有按键都使用 tap-hold 机制
- 支持自动大写功能

#### Vim Control 层 (vim_ctrl)
在此层中，键盘变成 Vim 风格的导航控制：

| 按键 | 功能                | 说明         |
| ---- | ------------------- | ------------ |
| h    | ←                   | 左移         |
| j    | ↓                   | 下移         |
| k    | ↑                   | 上移         |
| l    | →                   | 右移         |
| x    | Delete              | 删除字符     |
| i    | 切换到 vim_input 层 | 进入插入模式 |
| w    | Ctrl+→              | 下一个单词   |
| b    | Ctrl+←              | 上一个单词   |
| 0    | Home                | 行首         |
| 4    | End                 | 行尾 (代替$) |
| u    | Ctrl+Z              | 撤销         |
| r    | Ctrl+Y              | 重做         |
| y    | Ctrl+C              | 复制         |
| p    | Ctrl+V              | 粘贴         |
| d    | Ctrl+X              | 剪切         |
| /    | Ctrl+F              | 查找         |
| n    | F3                  | 查找下一个   |
| g    | Home                | 文档开头     |
| o    | Enter               | 换行         |
| ESC  | 保持在 vim_ctrl 层  | 返回控制模式 |

#### Vim Input 层 (vim_input)
- **Caps**: 切换到 vim_ctrl 层
- **Menu**: 保持 @menu 功能

#### Navigation 层 (导航层)
通过长按 Menu 键激活：

| 按键 | 功能               |
| ---- | ------------------ |
| 1    | 切换到 none 层     |
| 2    | 切换到 base 层     |
| 3    | 切换到 vim_ctrl 层 |

## 使用场景

### 1. 日常文本输入
- 使用 base 层进行正常输入
- 需要大写时长按对应按键
- 使用 Caps 键作为 ESC 或 Ctrl

### 2. 代码编辑
- 长按 Menu 键，然后按 3 进入 Vim 模式
- 使用 hjkl 进行光标移动
- 使用 yp 进行复制粘贴操作
- 按 i 进入插入模式继续编辑

### 3. 中英文切换
- 轻按左 Shift 键快速切换输入法

## 配置参数

```
tap-timeout: 1ms      # 轻按判定时间
hold-timeout: 160ms   # 长按判定时间
```

## 与标准键盘的主要区别

1. **Caps Lock 重新定义**：不再是简单的大写锁定，而是多功能键
2. **所有按键支持双功能**：轻按输入本身，长按输入大写/符号
3. **Vim 模式集成**：可以快速切换到类 Vim 的导航模式
4. **智能语言切换**：左 Shift 轻按即可切换输入法
5. **层级化布局**：根据不同使用场景切换不同的按键映射

这个配置旨在提高打字效率，减少手指移动距离，并提供更符合现代编辑习惯的键盘布局。
